{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startButton = document.querySelector('button[data-start]');\nconst days = document.querySelector('span[data-days]');\nconst hours = document.querySelector('span[data-hours]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst seconds = document.querySelector('span[data-seconds]');\nconst input = document.querySelector('#datetime-picker');\nlet intervalId;\nlet userSelectedDate;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = new Date (selectedDates[0]);\n    dateValidator(userSelectedDate);\n  },\n};\n\nflatpickr(\"#datetime-picker\", options);\nstartButton.disabled = true;\n\nfunction dateValidator (userSelectedDate) {\n  if (userSelectedDate.getTime() <= Date.now()) {\n    startButton.disabled = true;\n    return iziToast.error({\n      title: 'Caution',\n      message: \"Please choose a date in the future\",\n      position: 'topRight',\n    })\n  } else {\n    startButton.disabled = false;\n  }\n  userSelectedDate = 0;\n}\n\nstartButton.addEventListener('click',() => timer(userSelectedDate))\nfunction timer(userSelectedDate) {\n  startButton.disabled = true;\n  input.disabled = true;\n  if (intervalId) clearInterval(intervalId);\n  intervalId = setInterval(() => countDown(userSelectedDate), 1000);\n}\n\nfunction countDown(userSelectedDate) {\n  const date = new Date();\n  const timeRes = userSelectedDate.getTime() - date.getTime(); \n  const countDownRes = convertMs(timeRes);\n\n   if (timeRes <= 0) {\n    clearInterval(intervalId);\n    input.disabled = false;\n    return;\n  }\n\n  days.textContent = addLeadingZero(countDownRes.days);\n  hours.textContent = addLeadingZero(countDownRes.hours);\n  minutes.textContent = addLeadingZero(countDownRes.minutes);\n  seconds.textContent = addLeadingZero(countDownRes.seconds);\n}\n\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0'); \n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}"],"names":["startButton","days","hours","minutes","seconds","input","intervalId","userSelectedDate","options","selectedDates","dateValidator","flatpickr","iziToast","timer","countDown","date","timeRes","countDownRes","convertMs","addLeadingZero","value","ms"],"mappings":"0IAKA,MAAMA,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAQ,SAAS,cAAc,kBAAkB,EACvD,IAAIC,EACAC,EACJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmB,IAAI,KAAME,EAAc,CAAC,CAAC,EAC7CC,EAAcH,CAAgB,CAC/B,CACH,EAEAI,EAAU,mBAAoBH,CAAO,EACrCR,EAAY,SAAW,GAEvB,SAASU,EAAeH,EAAkB,CACxC,GAAIA,EAAiB,QAAO,GAAM,KAAK,IAAG,EACxC,OAAAP,EAAY,SAAW,GAChBY,EAAS,MAAM,CACpB,MAAO,UACP,QAAS,qCACT,SAAU,UAChB,CAAK,EAEDZ,EAAY,SAAW,GAEzBO,EAAmB,CACrB,CAEAP,EAAY,iBAAiB,QAAQ,IAAMa,EAAMN,CAAgB,CAAC,EAClE,SAASM,EAAMN,EAAkB,CAC/BP,EAAY,SAAW,GACvBK,EAAM,SAAW,GACbC,GAAY,cAAcA,CAAU,EACxCA,EAAa,YAAY,IAAMQ,EAAUP,CAAgB,EAAG,GAAI,CAClE,CAEA,SAASO,EAAUP,EAAkB,CACnC,MAAMQ,EAAO,IAAI,KACXC,EAAUT,EAAiB,QAAS,EAAGQ,EAAK,QAAO,EACnDE,EAAeC,EAAUF,CAAO,EAErC,GAAIA,GAAW,EAAG,CACjB,cAAcV,CAAU,EACxBD,EAAM,SAAW,GACjB,MACD,CAEDJ,EAAK,YAAckB,EAAeF,EAAa,IAAI,EACnDf,EAAM,YAAciB,EAAeF,EAAa,KAAK,EACrDd,EAAQ,YAAcgB,EAAeF,EAAa,OAAO,EACzDb,EAAQ,YAAce,EAAeF,EAAa,OAAO,CAC3D,CAGA,SAASE,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASF,EAAUG,EAAI,CAKrB,MAAMpB,EAAO,KAAK,MAAMoB,EAAK,KAAG,EAC1BnB,EAAQ,KAAK,MAAOmB,EAAK,MAAO,IAAI,EACpClB,EAAU,KAAK,MAAQkB,EAAK,MAAO,KAAQ,GAAM,EACjDjB,EAAU,KAAK,MAASiB,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAApB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}